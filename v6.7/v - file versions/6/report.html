<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EchoTools Report Builder v6.7</title>
    
    <!-- Pico CSS (base styles) -->
    <link rel="stylesheet" href="style-pico.css">
    
    <!-- Report styles (v6.5) -->
    <link rel="stylesheet" href="style-report.css">
</head>
<body>
<main class="container">

    <!-- Import Modal (positioned outside main section) -->
    <div id="import-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Import Measurements</h2>
                <button id="close-import-modal" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <div class="format-selector">
                    <label for="parse-config-select">Data Format:</label>
                    <select id="parse-config-select"></select>
                    <button id="submit">Import</button>
                    <button id="clear-import" class="secondary">Clear</button>
                    <button id="load-example-data" class="help-button" title="Load example data">?</button>
                </div>
                <textarea id="report" placeholder="Paste measurements data here..."></textarea>
            </div>
        </div>
    </div>

    <!-- Main Two-Column Layout -->
    <section id="options" class="two-column-layout" style="display: none;">
        
        <!-- Left Column: Measurements Panel -->
        <div id="measurements-panel">
            <div class="panel-header">
                <h2>Measurements</h2>
                <button id="open-import-modal">Import</button>
            </div>
            <div id="measurements-table">
                <!-- Measurements table populated by JS -->
            </div>
        </div>
        
        <!-- Right Column: Report Panel -->
        <div id="options-panel">
            <!-- Template Selector Row - CENTERED -->
            <div class="template-selector-row">
                <div class="template-selector-group">
                    <label for="report-config-select">Template:</label>
                    <select id="report-config-select"></select>
                    <!-- Container for dynamically inserted options file buttons -->
                    <span id="options-file-buttons"></span>
                    <button id="run-algorithms" class="icon-button" title="Run automatic algorithms" style="display: none;">
                        <!-- Auto icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="2">
        <path d="M15 1 L8 12 L11 12 L8 23 L16 12 L13 12 Z"></path>
    </svg>
                    </button>
                    <button id="reset-selections" class="icon-button secondary" title="Reset all form selections to defaults">
                        <!-- Refresh/reset icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 2v6h-6"></path>
                            <path d="M3 12a9 9 0 0 1 15-6.7L21 8"></path>
                            <path d="M3 22v-6h6"></path>
                            <path d="M21 12a9 9 0 0 1-15 6.7L3 16"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <hr class="template-divider">
            
            <!-- ContentEditable Report Area -->
            <div id="report-textarea" class="report-contenteditable" contenteditable="true">
                <!-- Report content with inline buttons populated by JS -->
            </div>
            
            <!-- Hidden: Form fields container (populated by buildForm) -->
            <div id="options-content" style="display: none;"></div>
            
            <!-- Copy to Clipboard Button -->
            <div class="copy-button-container">
                <button id="copy-report">Copy to Clipboard</button>
            </div>
        </div>
        
    </section>

</main>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" 
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" 
        crossorigin="anonymous" 
        referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.8/handlebars.min.js" 
        integrity="sha512-E1dSFxg+wsfJ4HKjutk/WaCzK7S2wv1POn1RRPGh8ZK+ag9l244Vqxji3r6wgz9YBf6+vhQEYJZpSjqWFPg9gg==" 
        crossorigin="anonymous" 
        referrerpolicy="no-referrer"></script>

<!-- Config files -->
<script src="config-input.js"></script>
<script src="config-report.js"></script>

<!-- Core Scripts (v6.5) -->
<script src="script-calcs.js"></script>
<script src="script-report.js"></script>
<script src="script-form.js"></script>

</body>
</html>
